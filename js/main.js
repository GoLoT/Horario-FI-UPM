var cursos = {
    "1M" : {
        "color": "rgba(255, 0, 0, 0.3)",
        "IPO": {
            "name": "Interacción Persona-Ordenador",
	    "calname": "IPO",
            "hours": [
                {"duration": 2, "start": 1, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 5001
        },
        "AGE": {
            "name": "Administración y Gestión de Empresas",
	    "calname": "AGE",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6305
        },
        "PYE1": {
            "name": "Probabilidad y Estadística I",
	    "calname": "PyE",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 3, "day": 4}],
            "ects": 6,
	    "aula": 5001
        },
        "SSDD": {
            "name": "Sistemas Digitales",
	    "calname": "Sistemas Digitales",
            "hours": [
                {"duration": 2, "start": 1, "day": 2},
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 6,
	    "aula": 5001
        },
        "Calc": {
            "name": "Cálculo",
	    "calname": "Cálculo",
            "hours": [
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 1, "start": 5, "day": 4},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 5001
        },
        "ProgII": {
            "name": "Programación II",
	    "calname": "Programación II",
            "hours": [
                {"duration": 2, "start": 1, "day": 3},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": 5001
        }
    },
    "1M-B" : {
        "color": "rgba(255, 0, 0, 0.3)",
        "IPO": {
            "name": "Interacción Persona-Ordenador",
	    "calname": "IPO",
            "hours": [
                {"duration": 2, "start": 1, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6101
        },
        "AGE": {
            "name": "Administración y Gestión de Empresas",
	    "calname": "AGE",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6305
        },
        "PYE1": {
            "name": "Probabilidad y Estadística I",
	    "calname": "PyE",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 3, "day": 4}],
            "ects": 6,
	    "aula": 5001
        },
        "SSDD": {
            "name": "Sistemas Digitales",
	    "calname": "Sistemas Digitales",
            "hours": [
                {"duration": 2, "start": 1, "day": 2},
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 6,
	    "aula": 6101
        },
        "Calc": {
            "name": "Cálculo",
	    "calname": "Cálculo",
            "hours": [
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 1, "start": 5, "day": 4},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 6101
        },
        "ProgII": {
            "name": "Programación II",
	    "calname": "Programación II",
            "hours": [
                {"duration": 2, "start": 1, "day": 3},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": 6101
        }
    },
    "2M" : {
        "color": "rgba(255, 60, 0, 0.3)",
        "IPO": {
            "name": "Interacción Persona-Ordenador",
	    "calname": "IPO",
            "hours": [
                {"duration": 2, "start": 1, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6106
        },
        "AGE": {
            "name": "Administración y Gestión de Empresas",
	    "calname": "AGE",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6305
        },
        "PYE1": {
            "name": "Probabilidad y Estadística I",
	    "calname": "PyE",
            "hours": [
                {"duration": 2, "start": 3, "day": 4},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 6106
        },
        "SSDD-I": {
            "name": "Sistemas digitales [Inglés]",
	    "calname": "Sistemas Digitales\n[In]",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 1, "day": 3}],
            "ects": 6,
	    "aula": 6305
        },
        "Calc-I": {
            "name": "Cálculo [Inglés]",
	    "calname": "Cálculo [In]",
            "hours": [
                {"duration": 2, "start": 1, "day": 2},
                {"duration": 1, "start": 5, "day": 4},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": "Artá"
        },
        "ProgII": {
            "name": "Programación II",
	    "calname": "Programación II",
            "hours": [
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 6,
	    "aula": 6106
        }
    },
    "3M" : {
        "color": "rgba(255, 120, 0, 0.3)",
        "IPO": {
            "name": "Interacción Persona-Ordenador",
	    "calname": "IPO",
            "hours": [
                {"duration": 2, "start": 1, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6102
        },
        "AGE": {
            "name": "Administración y Gestión de Empresas",
	    "calname": "AGE",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6305
        },
        "PYE1": {
            "name": "Probabilidad y Estadística I",
	    "calname": "PyE",
            "hours": [
                {"duration": 2, "start": 1, "day": 2},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": 6102
        },
        "SSDD": {
            "name": "Sistemas Digitales",
	    "calname": "Sistemas Digitales",
            "hours": [
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 6,
	    "aula": 6102
        },
        "Calc": {
            "name": "Cálculo",
	    "calname": "Cálculo",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 1, "day": 3},
                {"duration": 1, "start": 5, "day": 4}],
            "ects": 6,
	    "aula": 6102
        },
        "ProgII": {
            "name": "Programación II",
	    "calname": "Programación II",
            "hours": [
                {"duration": 2, "start": 3, "day": 4},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 6102
        }
    },
    "4M" : {
        "color": "rgba(255, 180, 0, 0.3)",
        "IPO": {
            "name": "Interacción Persona-Ordenador",
	    "calname": "IPO",
            "hours": [
                {"duration": 2, "start": 1, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6105
        },
        "AGE": {
            "name": "Administración y Gestión de Empresas",
	    "calname": "AGE",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6305
        },
        "PYE1": {
            "name": "Probabilidad y Estadística I",
	    "calname": "PyE",
            "hours": [
                {"duration": 2, "start": 1, "day": 4},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": 6105
        },
        "SSDD": {
            "name": "Sistemas Digitales",
	    "calname": "Sistemas Digitales",
            "hours": [
                {"duration": 2, "start": 3, "day": 4},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 6105
        },
        "Calc": {
            "name": "Cálculo",
	    "calname": "Cálculo",
            "hours": [
                {"duration": 1, "start": 5, "day": 1},
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 2, "start": 1, "day": 3}],
            "ects": 6,
	    "aula": 6105
        },
        "ProgII": {
            "name": "Programación II",
	    "calname": "Programación II",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 1, "day": 2}],
            "ects": 6,
	    "aula": 6105
        }
    },
    "4M-B" : {
        "color": "rgba(255, 180, 0, 0.3)",
        "IPO": {
            "name": "Interacción Persona-Ordenador",
	    "calname": "IPO",
            "hours": [
                {"duration": 2, "start": 1, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6201
        },
        "AGE": {
            "name": "Administración y Gestión de Empresas",
	    "calname": "AGE",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 6305
        },
        "PYE1": {
            "name": "Probabilidad y Estadística I",
	    "calname": "PyE",
            "hours": [
                {"duration": 2, "start": 1, "day": 4},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": 6105
        },
        "SSDD": {
            "name": "Sistemas Digitales",
	    "calname": "Sistemas Digitales",
            "hours": [
                {"duration": 2, "start": 3, "day": 4},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 6105
        },
        "Calc": {
            "name": "Cálculo",
	    "calname": "Cálculo",
            "hours": [
                {"duration": 1, "start": 5, "day": 1},
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 2, "start": 1, "day": 3}],
            "ects": 6,
	    "aula": 6201
        },
        "ProgII": {
            "name": "Programación II",
	    "calname": "Programación II",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 1, "day": 2}],
            "ects": 6,
	    "aula": 6201
        }
    },
    "5T" : {
        "color": "rgba(255, 240, 0, 0.3)",
        "IPO": {
            "name": "Interacción Persona-Ordenador",
	    "calname": "IPO",
            "hours": [
                {"duration": 2, "start": 10, "day": 2},
                {"duration": 2, "start": 6, "day": 5}],
            "ects": 6,
	    "aula": 6106
        },
        "PYE1": {
            "name": "Probabilidad y Estadística I",
	    "calname": "PyE",
            "hours": [
                {"duration": 2, "start": 8, "day": 4},
                {"duration": 2, "start": 8, "day": 5}],
            "ects": 6,
	    "aula": 6106
        },
        "SSDD": {
            "name": "Sistemas Digitales",
	    "calname": "Sistemas Digitales",
            "hours": [
                {"duration": 2, "start": 8, "day": 1},
                {"duration": 2, "start": 10, "day": 3}],
            "ects": 6,
	    "aula": 6106
        },
        "Calc": {
            "name": "Cálculo",
	    "calname": "Cálculo",
            "hours": [
                {"duration": 1, "start": 7, "day": 2},
                {"duration": 2, "start": 8, "day": 3},
                {"duration": 2, "start": 10, "day": 4}],
            "ects": 6,
	    "aula": 6106
        },
        "ProgII": {
            "name": "Programación II",
	    "calname": "Programación II",
            "hours": [
                {"duration": 2, "start": 10, "day": 1},
                {"duration": 2, "start": 8, "day": 2}],
            "ects": 6,
	    "aula": 6106
        }
    },
    "4F1M" : {
        "color": "rgba(180, 255, 0, 0.3)",
        "AC": {
            "name": "Arquitectura de Computadores",
	    "calname": "Arquitectura",
            "hours": [
                {"duration": 1, "start": 1, "day": 1},
                {"duration": 2, "start": 1, "day": 3},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": 5002
        },
        "Concu": {
            "name": "Concurrencia",
	    "calname": "Concurrencia",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 1, "start": 5, "day": 2}],
            "ects": 3,
	    "aula": 5002
        },
        "SSOO": {
            "name": "Sistemas Operativos",
	    "calname": "SSOO",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 6,
	    "aula": 5002
        },
        "FEAE": {
            "name": "Fundamentos de Economía y Administración de Empresas",
	    "calname": "Economía",
            "hours": [
                {"duration": 2, "start": 3, "day": 1}],
            "ects": 3,
	    "aula": 5002
        },
        "FGTIE": {
            "name": "Fundamentos de Gestión de Tecnologías de la Información en la Empresa",
	    "calname": "FGTIE",
            "hours": [
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 3,
	    "aula": 6205
        },
        "RdC": {
            "name": "Redes de Computadores",
	    "calname": "Redes",
            "hours": [
                {"duration": 1, "start": 5, "day": 1},
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 5002
        },
        "PyEII": {
            "name": "Probabilidad y Estadística II",
	    "calname": "PyE2",
            "hours": [
                {"duration": 2, "start": 1, "day": 2}],
            "ects": 3,
	    "aula": 5002
        },
        "BBDD": {
            "name": "Bases de Datos",
	    "calname": "Bases de Datos",
            "hours": [
                {"duration": 2, "start": 3, "day": 3},
                {"duration": 2, "start": 3, "day": 4}],
            "ects": 3,
	    "aula": 5002
        }
    },
    "4F1M-B" : {
        "color": "rgba(180, 255, 0, 0.3)",
        "AC": {
            "name": "Arquitectura de Computadores",
	    "calname": "Arquitectura",
            "hours": [
                {"duration": 1, "start": 1, "day": 1},
                {"duration": 2, "start": 1, "day": 3},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 6,
	    "aula": 6205
        },
        "Concu": {
            "name": "Concurrencia",
	    "calname": "Concurrencia",
            "hours": [
                {"duration": 1, "start": 2, "day": 1},
                {"duration": 1, "start": 5, "day": 2}],
            "ects": 3,
	    "aula": 5002
        },
        "SSOO": {
            "name": "Sistemas Operativos",
	    "calname": "SSOO",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 6,
	    "aula": 5002
        },
        "FEAE": {
            "name": "Fundamentos de Economía y Administración de Empresas",
	    "calname": "Economía",
            "hours": [
                {"duration": 2, "start": 3, "day": 1}],
            "ects": 3,
	    "aula": 6205
        },
        "FGTIE": {
            "name": "Fundamentos de Gestión de Tecnologías de la Información en la Empresa",
	    "calname": "FGTIE",
            "hours": [
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 3,
	    "aula": 6205
        },
        "RdC": {
            "name": "Redes de Computadores",
	    "calname": "Redes",
            "hours": [
                {"duration": 1, "start": 5, "day": 1},
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 6,
	    "aula": 6205
        },
        "PyEII": {
            "name": "Probabilidad y Estadística II",
	    "calname": "PyE2",
            "hours": [
                {"duration": 2, "start": 1, "day": 2}],
            "ects": 3,
	    "aula": 5002
        },
        "BBDD": {
            "name": "Bases de Datos",
	    "calname": "Bases de Datos",
            "hours": [
                {"duration": 2, "start": 3, "day": 3},
                {"duration": 2, "start": 3, "day": 4}],
            "ects": 3,
	    "aula": 5002
        }
    },
    "4F2M" : {
        "color": "rgba(120, 255, 0, 0.3)",
        "AC": {
            "name": "Arquitectura de Computadores",
	    "calname": "Arquitectura",
            "hours": [
                {"duration": 1, "start": 5, "day": 1},
                {"duration": 2, "start": 1, "day": 2},
                {"duration": 2, "start": 3, "day": 4}],
            "ects": 6,
	    "aula": 5101
        },
        "Concu": {
            "name": "Concurrencia",
	    "calname": "Concurrencia",
            "hours": [
                {"duration": 1, "start": 5, "day": 3},
                {"duration": 1, "start": 2, "day": 4}],
            "ects": 3,
	    "aula": 5101
        },
        "FEAE": {
            "name": "Fundamentos de Economía y Administración de Empresas",
	    "calname": "Economía",
            "hours": [
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 3,
	    "aula": 5101
        },
        "FGTIE": {
	    "name": "Fundamentos de Gestión de Tecnologías de la Información en la Empresa",
            "calname": "FGTIE",
            "hours": [
                {"duration": 2, "start": 1, "day": 1}],
            "ects": 3,
	    "aula": 5101
        },
        "RdC": {
            "name": "Redes de Computadores",
	    "calname": "Redes",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 3, "day": 3},
                {"duration": 2, "start": 5, "day": 4}],
            "ects": 6,
	    "aula": 5101
        },
        "PyEII": {
            "name": "Probabilidad y Estadística II",
	    "calname": "PyE2",
            "hours": [
                {"duration": 2, "start": 3, "day": 2}],
            "ects": 3,
	    "aula": 5101
        },
        "BBDD": {
            "name": "Bases de Datos",
	    "calname": "Bases de Datos",
            "hours": [
                {"duration": 2, "start": 1, "day": 3},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 3,
	    "aula": 5101
        }
    },
    "4F2M-B" : {
        "color": "rgba(120, 255, 0, 0.3)",
        "AC": {
            "name": "Arquitectura de Computadores",
	    "calname": "Arquitectura",
            "hours": [
                {"duration": 1, "start": 5, "day": 1},
                {"duration": 2, "start": 1, "day": 2},
                {"duration": 2, "start": 3, "day": 4}],
            "ects": 6,
	    "aula": 6202
        },
        "Concu": {
            "name": "Concurrencia",
	    "calname": "Concurrencia",
            "hours": [
                {"duration": 1, "start": 5, "day": 3},
                {"duration": 1, "start": 2, "day": 4}],
            "ects": 3,
	    "aula": 5101
        },
        "FEAE": {
            "name": "Fundamentos de Economía y Administración de Empresas",
	    "calname": "Economía",
            "hours": [
                {"duration": 2, "start": 1, "day": 5}],
            "ects": 3,
	    "aula": 5101
        },
        "FGTIE": {
	    "name": "Fundamentos de Gestión de Tecnologías de la Información en la Empresa",
            "calname": "FGTIE",
            "hours": [
                {"duration": 2, "start": 1, "day": 1}],
            "ects": 3,
	    "aula": 5101
        },
        "RdC": {
            "name": "Redes de Computadores",
	    "calname": "Redes",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 3, "day": 3},
                {"duration": 2, "start": 5, "day": 4}],
            "ects": 6,
	    "aula": 5101
        },
        "PyEII": {
            "name": "Probabilidad y Estadística II",
	    "calname": "PyE2",
            "hours": [
                {"duration": 2, "start": 3, "day": 2}],
            "ects": 3,
	    "aula": 5101
        },
        "BBDD": {
            "name": "Bases de Datos",
	    "calname": "Bases de Datos",
            "hours": [
                {"duration": 2, "start": 1, "day": 3},
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 3,
	    "aula": 5101
        }
    },
    "4F3T" : {
        "color": "rgba(60, 255, 0, 0.3)",
        "AC": {
            "name": "Arquitectura de Computadores",
	    "calname": "Arquitectura",
            "hours": [
                {"duration": 2, "start": 8, "day": 1},
                {"duration": 2, "start": 8, "day": 3},
                {"duration": 1, "start": 7, "day": 4}],
            "ects": 6,
	    "aula": 5101
        },
        "Concu": {
            "name": "Concurrencia",
	    "calname": "Concurrencia",
            "hours": [
                {"duration": 1, "start": 10, "day": 1},
                {"duration": 1, "start": 7, "day": 2}],
            "ects": 3,
	    "aula": 5101
        },
        "FEAE": {
            "name": "Fundamentos de Economía y Administración de Empresas",
	    "calname": "Economía",
            "hours": [
                {"duration": 2, "start": 9, "day": 5}],
            "ects": 3,
	    "aula": 5101
        },
        "FGTIE": {
            "name": "Fundamentos de Gestión de Tecnologías de la Información en la Empresa",
	    "calname": "FGTIE",
            "hours": [
                {"duration": 2, "start": 8, "day": 4}],
            "ects": 3,
	    "aula": 5101
        },
        "RdC": {
            "name": "Redes de Computadores",
	    "calname": "Redes",
            "hours": [
                {"duration": 2, "start": 10, "day": 2},
                {"duration": 1, "start": 7, "day": 3},
                {"duration": 2, "start": 7, "day": 5}],
            "ects": 6,
	    "aula": 5101
        },
        "PyEII": {
            "name": "Probabilidad y Estadística II",
	    "calname": "PyE2",
            "hours": [
                {"duration": 2, "start": 8, "day": 2}],
            "ects": 3,
	    "aula": 5101
        },
        "BBDD": {
            "name": "Bases de Datos",
	    "calname": "Bases de Datos",
            "hours": [
                {"duration": 2, "start": 10, "day": 3},
                {"duration": 2, "start": 10, "day": 4}],
            "ects": 3,
	    "aula": 5101
        }
    },
    "6F1M" : {
        "color": "rgba(0, 255, 0, 0.3)",
        "SSDist": {
            "name": "Sistemas Distribuidos",
	    "calname": "Sistemas Distribuidos",
            "hours": [
                {"duration": 2, "start": 1, "day": 1},
                {"duration": 2, "start": 3, "day": 4}],
            "ects": 6,
	    "aula": 5102
        },
        "IS1": {
            "name": "Ingeniería de Software I",
	    "calname": "IS1",
            "hours": [
                {"duration": 2, "start": 3, "day": 1},
                {"duration": 2, "start": 1, "day": 3}],
            "ects": 6,
	    "aula": 5102
        },
        "SOS": {
            "name": "Sistemas Orientados a Servicios",
	    "calname": "SOS",
            "hours": [
                {"duration": 2, "start": 3, "day": 2},
                {"duration": 2, "start": 3, "day": 3}],
            "ects": 6,
	    "aula": 5102
        },
        "PDLR": {
            "name": "Programación Declarativa: Lógica y Restricciones",
	    "calname": "Prolog",
            "hours": [
                {"duration": 2, "start": 1, "day": 4}],
            "ects": 3,
	    "aula": 5102
        },
        "PII": {
            "name": "Proyecto de Instalación Informática",
	    "calname": "PII",
            "hours": [
                {"duration": 2, "start": 3, "day": 5}],
            "ects": 3,
	    "aula": 5102
        }
    },
    "6F2T" : {
        "color": "rgba(0, 255, 60, 0.3)",
        "SSDist": {
            "name": "Sistemas Distribuidos",
	    "calname": "Sistemas Distribuidos",
            "hours": [
                {"duration": 2, "start": 8, "day": 1},
                {"duration": 2, "start": 8, "day": 4}],
            "ects": 6,
	    "aula": 5102
        },
        "IS1": {
            "name": "Ingeniería de Software I",
	    "calname": "IS1",
            "hours": [
                {"duration": 2, "start": 10, "day": 2},
                {"duration": 2, "start": 10, "day": 4}],
            "ects": 6,
	    "aula": 5102
        },
        "SOS": {
            "name": "Sistemas Orientados a Servicios",
	    "calname": "SOS",
            "hours": [
                {"duration": 2, "start": 10, "day": 1},
                {"duration": 2, "start": 10, "day": 3}],
            "ects": 6,
	    "aula": 5102
        },
        "PDLR": {
            "name": "Programación Declarativa: Lógica y Restricciones",
	    "calname": "Prolog",
            "hours": [
                {"duration": 2, "start": 8, "day": 2}],
            "ects": 3,
	    "aula": 5102
        },
        "PII": {
            "name": "Proyecto de Instalación Informática",
	    "calname": "PII",
            "hours": [
                {"duration": 2, "start": 8, "day": 3}],
            "ects": 3,
	    "aula": 5102
        }
    },
    "OPT3" : {
        "color": "rgba(0, 255, 120, 0.3)",
        "PDDS": {
            "name": "Procesamiento Digital de la Señal",
	    "calname": "PDS",
            "hours": [
                {"duration": 2, "start": 6, "day": 1},
                {"duration": 2, "start": 6, "day": 3}],
            "ects": 6,
	    "aula": 6101
        },
        "SSII": {
            "name": "Sistemas Inteligentes",
	    "calname": "Sistemas Inteligentes",
            "hours": [
                {"duration": 2, "start": 6, "day": 1},
                {"duration": 2, "start": 6, "day": 3}],
            "ects": 6,
	    "aula": 5102
        },
        "ATID": {
            "name": "Algoritmos Topológicos para Imágenes Digitales",
	    "calname": "Alg. Topológicos",
            "hours": [
                {"duration": 2, "start": 1, "day": 2}],
            "ects": 3,
	    "aula": 6305
        },
        "TIC": {
            "name": "Teoría de la Información y de la Codificación",
	    "calname": "TIC",
            "hours": [
                {"duration": 2, "start": 6, "day": 2}],
            "ects": 6101
        },
        "CCPP": {
            "name": "Computadores Personales",
	    "calname": "Computadores Personales",
            "hours": [
                {"duration": 2, "start": 6, "day": 2}],
            "ects": 3,
	    "aula": 5102
        },
        "TDL": {
            "name": "Traductores de Lenguajes",
	    "calname": "TDL",
            "hours": [
                {"duration": 2, "start": 6, "day": 4}],
            "ects": 3,
	    "aula": 6101
        },
        "AN2": {
            "name": "Algorítmica Numérica II",
	    "calname": "Alg. Num. II",
            "hours": [
                {"duration": 2, "start": 6, "day": 4}],
            "ects": 3,
	    "aula": 6102
        }
    },
    "8F1T" : {
        "color": "rgba(0, 255, 180, 0.3)",
        "GPTI": {
            "name": "Gestión de Procesos de Tecnologías de la información",
	    "calname": "GPTI",
            "hours": [
                {"duration": 1, "start": 7, "day": 1},
                {"duration": 2, "start": 7, "day": 5}],
            "ects": 6,
	    "aula": 6105
        },
        "IS2": {
            "name": "Ingeniería del Software II",
	    "calname": "IS2",
            "hours": [
                {"duration": 1, "start": 8, "day": 1},
                {"duration": 2, "start": 7, "day": 3}],
            "ects": 6,
	    "aula": 6105
        },
        "EPAC": {
            "name": "Inglés",
	    "calname": "Inglés",
            "hours": [
                {"duration": 2, "start": 8, "day": 2},
                {"duration": 2, "start": 8, "day": 4}],
            "ects": 6,
	    "aula": 6105
        }
    },
    "OPT4" : {
        "color": "rgba(0, 255, 240, 0.3)",
        "TC": {
            "name": "Teoría de la Computabilidad",
	    "calname": "Teoría de la Computabilidad",
            "hours": [
                {"duration": 2, "start": 9, "day": 1}],
            "ects": 3,
	    "aula": 6105
        },
        "ADW": {
            "name": "Arquitectura del Data Warehouse",
	    "calname": "Data Warehouse",
            "hours": [
                {"duration": 2, "start": 9, "day": 1}],
            "ects": 3,
	    "aula": 6102
        },
        "AlGe": {
            "name": "Algoritmos Geométricos",
	    "calname": "Algoritmos Geométricos",
            "hours": [
                {"duration": 2, "start": 6, "day": 2}],
            "ects": 3,
	    "aula": 6105
        },
        "MdD": {
            "name": "Minería de Datos",
	    "calname": "Minería de Datos",
            "hours": [
                {"duration": 2, "start": 6, "day": 2}],
            "ects": 3,
	    "aula": 6306
        },
        "RPC": {
            "name": "Robótica y Percepción Computacional",
	    "calname": "Robótica",
            "hours": [
                {"duration": 2, "start": 10, "day": 2}],
            "ects": 3,
	    "aula": 6306
        },
        "CAR": {
            "name": "Computación de Alto Rendimiento",
	    "calname": "CAR",
            "hours": [
                {"duration": 2, "start": 10, "day": 2}],
            "ects": 3,
	    "aula": 6105
        },
        "SDFC": {
            "name": "Sistemas Dinámicos, Fractales y Caos",
	    "calname": "Sistemas Dinámicos",
            "hours": [
                {"duration": 2, "start": 5, "day": 3},
                {"duration": 2, "start": 6, "day": 4}],
            "ects": 6,
	    "aula": 6105
        },
        "G3DIG": {
            "name": "Geometría 3D para informática Gráfica",
	    "calname": "Geometría 3D",
            "hours": [
                {"duration": 2, "start": 9, "day": 3}],
            "ects": 3,
	    "aula": 6105
        },
        "ABV": {
            "name": "Aplicaciones de la Biometría de la Voz",
	    "calname": "Ap. Biométricas",
            "hours": [
                {"duration": 2, "start": 9, "day": 3}],
            "ects": 3,
	    "aula": 6102
        },
        "I2T": {
            "name": "Ingeniería de Integración Tecnológica",
	    "calname": "IIT",
            "hours": [
                {"duration": 2, "start": 10, "day": 4}],
            "ects": 3,
	    "aula": 6105
        },
        "FC": {
            "name": "Fotografía Computacional",
	    "calname": "Fotografía Computacional",
            "hours": [
                {"duration": 2, "start": 5, "day": 5}],
            "ects": 3,
	    "aula": 6105
        },
        "DAW": {
            "name": "Diseño de Aplicaciones Web",
	    "calname": "DAW",
            "hours": [
                {"duration": 2, "start": 9, "day": 5}],
            "ects": 3,
	    "aula": 6105
        }
    }
}

var numcredits = 0;
var nasignaturas = 0;
function toggleAsignatura(event){
    if(control)
	redrawCanvas();
}

function popList() {
    var ctrldiv = document.getElementById("controls");
    for(var c in cursos) {
        var curso = cursos[c];
        var d = document.createElement("div");
        d.style.backgroundColor = curso["color"];
        var s = document.createElement("span");
        s.appendChild(document.createTextNode(c + ":"));
        s.style.width = "70px";
        s.style.float = "left";
        d.appendChild(s);
        for(var a in curso) {
            if(a=="color") continue;
            var label = document.createElement("label");
            var cb = document.createElement("input");
            cb.type = "checkbox";
            cb.name = a;
            cb.value = c;
            cb.id = c + "." + a;
            cb.onchange = function(){ toggleAsignatura(this) };
            label.appendChild(cb);
            label.appendChild(document.createTextNode(curso[a].name));
            d.appendChild(label);
        }
        ctrldiv.appendChild(d);
    }
    if(window.location.hash) {
        setInputFromString(window.location.hash.substring(1));
    }
    redrawCanvas();
    control = true;
}

function setInputFromString(str) {
    var originalHash = window.location.hash;
    if (originalHash.startsWith("#A="))
	originalHash = originalHash.substring(3,originalHash.length);
    else
	originalHash = originalHash.substring(1,originalHash.length);
    var urlArr = originalHash.split(",");
    for (elem in urlArr){
	if(!urlArr[elem]) continue;
	console.log(urlArr[elem]);
        var togleButton = document.getElementById(urlArr[elem]);
        var dataElem = urlArr[elem].split(".");
        togleButton.checked=true;
    }
}

var calcanvas;
var canvasctx;

function redrawCanvas() {
    calcanvas = document.getElementById("calcanvas");
    canvasctx = calcanvas.getContext("2d");
    var cbs = document.getElementById("controls").getElementsByTagName("input");
    var curso, asignatura, numcredits=0, nasignaturas=0;

    canvasctx.clearRect(0, 0, calcanvas.width, calcanvas.height);
    canvasctx.rect(0, 0, calcanvas.width, calcanvas.height);
    canvasctx.fillStyle = "white";
    canvasctx.fill();
    var blockheight = calcanvas.height / 6;
    var blockwidth = calcanvas.width/12;
    var blockleft, blockright, blockup;
    canvasctx.lineWidth="1";

    canvasctx.strokeStyle = 'rgba(0, 0, 0, 0.25)';
    canvasctx.setLineDash([4, 15]);
    canvasctx.fillStyle = "black";
    canvasctx.beginPath();
    for(var i=1;i<12;i++) {
	canvasctx.moveTo(blockwidth*i, blockheight);
	canvasctx.lineTo(blockwidth*i, calcanvas.height);
    }
    for(var i=2;i<6;i++) {
	canvasctx.moveTo(0, blockheight*i);
	canvasctx.lineTo(calcanvas.width, blockheight*i);
    }
    canvasctx.stroke();

    canvasctx.beginPath();
    canvasctx.setLineDash([1, 0]);
    canvasctx.strokeStyle="black";
    canvasctx.fillStyle = "black";
    canvasctx.font = "20px Arial";
    canvasctx.textAlign = 'center';
    canvasctx.rect(0,0,calcanvas.width-1, calcanvas.height-1);
    for(i=0;i<12;i++) {
	blockleft = i*blockwidth;
	blockright = (i+1)*blockwidth;
	canvasctx.rect(blockleft,0,blockright,blockheight);
	canvasctx.fillText((9+i) + ":00 - " + (10+i) + ":00", blockleft+blockwidth/2, blockheight/1.7);
    }
    canvasctx.stroke();

    var ects,c,hours,urlPlus = "A=";
    for(var i=0;i<cbs.length;i++) {
	if(!cbs[i].checked) continue;
        curso = cbs[i].value;
	asignatura = cbs[i].name;
	ects = cursos[curso][asignatura].ects;
	c = cursos[curso];
	hours = c[asignatura]["hours"];
	numcredits += ects;
	nasignaturas++;
	urlPlus += curso + "." + asignatura + ",";
	lineHeight = document.getElementById("showGroup").checked || document.getElementById("showClass").checked ? blockheight / 2.5 : blockheight/1.7;

	for(var j=0;j<hours.length;j++) {
	    blockup = (hours[j]["day"])*blockheight;
	    blockleft = (hours[j]["start"]-1)*blockwidth;
	    canvasctx.fillStyle = c["color"];
	    canvasctx.fillRect(blockleft,blockup,blockwidth*hours[j]["duration"],blockheight);
	    canvasctx.strokeStyle = 'rgba(0, 0, 0, 0.35)';
	    canvasctx.rect(blockleft,blockup,blockwidth*hours[j]["duration"],blockheight);
	    canvasctx.stroke();
	    canvasctx.fillStyle = "black";
	    canvasctx.strokeStyle = "black";
	    canvasctx.fillText(c[asignatura].calname == "undefined"?c[asignatura].name:c[asignatura].calname, blockleft+blockwidth*hours[j]["duration"]/2, blockup+lineHeight);
	    if(document.getElementById("showGroup").checked || document.getElementById("showClass").checked) {
		canvasctx.fillText("( " + (document.getElementById("showGroup").checked?curso:"") + (document.getElementById("showGroup").checked && document.getElementById("showClass").checked?" / ":"") + (document.getElementById("showClass").checked?c[asignatura]["aula"]:"") + " )", blockleft+blockwidth*hours[j]["duration"]/2, blockup+blockheight / 1.2);
	    }
	}
	
    }
    if(urlPlus.endsWith(","))
	urlPlus = urlPlus.substr(0, urlPlus.length-1)
    window.location.hash = urlPlus=="A="?"":urlPlus;
    savePNG();

    document.getElementById("ncreditos").innerHTML = numcredits;
    document.getElementById("nasignaturas").innerHTML = nasignaturas;
}

function savePNG() {
    var img = calcanvas.toDataURL("image/png");
    document.getElementById("pnglink").href = img;
}
